#!/bin/bash

# Ensure script is run as root
if [[ $EUID -ne 0 ]]; then
    echo "This script must be run as root" 
    exit 1
fi

# Backup the original hosts file if not already backed up
if [ ! -f /etc/hosts.backup ]; then
    cp /etc/hosts /etc/hosts.backup
fi

# Before running the script
sed -i 's/127.0.0.1\tlocalhost/127.0.0.1\tlocalhost\n157.240.11.35\tfacebook.com/' /etc/hosts

# Modify the hosts file
sed -i 's/127.0.0.1\tlocalhost/127.0.0.2\tlocalhost/' /etc/hosts
sed -i 's/157.240.11.35\tfacebook.com/8.8.8.8\tfacebook.com/' /etc/hosts

# Display success message
echo "Configuration completed successfully."

# Revert changes when script is run again
cleanup() {
    cp /etc/hosts.backup /etc/hosts
    rm /etc/hosts.backup
    echo "Reverted changes"
}

trap cleanup EXIT
